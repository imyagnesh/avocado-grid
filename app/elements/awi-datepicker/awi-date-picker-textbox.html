<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="awi-date-picker-dialog.html">

<dom-module id="awi-date-picker-textbox">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <awi-date-picker-dialog value="{{value}}"></awi-date-picker-dialog>
    <paper-input name="{{name}}"
                 label="{{label}}"
                 min$="{{minValue}}"
                 max$="{{maxValue}}"
                 value$="{{value}}"
                 required="{{required}}"
                 error-message="{{computeError()}}" auto-validate readonly></paper-input>
  </template>
</dom-module>
<script>
  (function () {
    Polymer({
      is: 'awi-date-picker-textbox',

      properties: {

        name:{
          type: String
        },

        label:{
          type: String,
          value: "Date"
        },

        required:{
          type: Boolean,
          value: true
        },

        minValue:{
          type: Date
        },

        maxValue:{
          type: Date
        },

        value:{
          type: String,
          notify: true
        },

        readonly:{
          type: Boolean,
          value: false
        },

        type:{
          type: String
        },

        defaultValue:{
          type: String
        },

        _boundOnFocus: {
          type: Function,
          value: function() {
            return this._onFocus.bind(this);
          }
        }

      },

      ready: function() {
        this.addEventListener('focus', this._boundOnFocus, true);
      },

      _onFocus: function() {
        Polymer.dom(this.root).querySelector('awi-date-picker-dialog').open();
      },

      computeVal: function (value,defaultValue) {
        if(value){
          return value;
        }
        else
        {
          return defaultValue;
        }
      },

      computeError: function (label) {
        return this.label + ' is not valid!';
      }
    });
  })();
</script>
